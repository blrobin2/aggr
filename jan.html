<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Aggr</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
  <link rel="stylesheet" href="styles/app.css">
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-2">
        <h3>Aggr<br> <small>January</small></h3>
        <ul>
          <li><a href="/">Current Month</a></li>
          <li><a href="/january">January</a></li>
        </ul>
      </div>
      <div class="col-md-10">
        <div id="albums"></div>
      </div>
    </div>
  </div>

  <script id="albums-template" type="text/x-handlebars-template">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Date</th>
          <th>Artist</th>
          <th>Album</th>
        </tr>
      </thead>
      <tbody>
        {{#each albums}}
          <tr>
            <td>{{date}}</td>
            <td>{{artist}}</td>
            <td>{{album}}</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.6/handlebars.min.js"></script>
  <script src="https://cdn.jsdelivr.net/lodash/4.17.3/lodash.min.js"></script>
  <script>
    const albumsSrc = document.getElementById('albums-template').innerHTML;
    const albumsTmpl = Handlebars.compile(albumsSrc);
    const albumsContainer = document.getElementById('albums');
    fetch('jan.json')
      .then(res => res.json())
      .then(res => {
        const sorted = _.orderBy(res.albums, ['date','artist'], ['desc', 'asc']);
        albumsContainer.innerHTML = albumsTmpl({albums: sorted});
      });
  </script>
</body>
</html>